```
λ§λ¦¬μ•„db
host : incodej-lab.iptime.org port : 3307
db : optroute?characterEncoding=UTF-8&serverTimezone=UTC
user : optroute
pw : optroutepw1004

optroute DBμ— μλ” λ°μ΄ν„°λ“¤κ³Ό λΉ„κµν•μ—¬ κ±΄μκ°€ λ§μ•„μ•Ό ν•¨
μΏΌλ¦¬ λ―Έλ¦¬ μ¤€λΉ„ν•κΈ° :)

μ‹μ„¤ -> κ±΄ μ
μμ§‘ -> ν• νƒ€μ„

https://jsonformatter.org/#
π‘π––π–
```

## 3.1.1.2 IP SDN λ§ κ²½λ΅ λ°μ΄ν„° κµ¬μ¶•
```
ANM-002
β DBμ— μ ‘μ†ν•μ—¬ μ €μ¥λ κ²½λ΅ λ°μ΄ν„° κ±΄μμ™€ RAW λ°μ΄ν„° κ±΄μκ°€ μΌμΉν•¨μ„ ν™•μΈ
<λ§ν¬>
<niadb ip_sdn tb_link>
select count(id) from ip_sdn.tb_link tl

<UTC2 optroute link>
select COUNT(l.Id)  from link l 

```
![image](https://user-images.githubusercontent.com/97263974/207226736-1bd666d9-17bb-4768-bc8b-87160f7a43de.png)
## 3.1.1.3 KOREN IP SDN μ΄μ© λ°μ΄ν„° μμ§‘κΈ°λ¥ κ³ λ„ν™”(1λ¶„μ£ΌκΈ°)
```
ANM-003
<νΈλν”½, λ…Έλ“ν©ν„°>
1. λ°±λ³Έ λ° μ¤‘κ³„ κµ¬κ°„ μΈν„°νμ΄μ¤λ³„ νΈλν”½ μμ§‘ κΈ°λ¥ ν™•μΈ
1.1 μ—°λ™ λ€μƒ νΈλν”½ μ›μ‹ λ°μ΄ν„°μ™€ μ—°λ™ ν›„ DBμ— μ €μ¥λ νΈλν”½ λ°μ΄ν„°κ°€ μΌμΉν•¨μ„ ν™•μΈ
2. μ¥λΉ„ λ¦¬μ†μ¤ μ‚¬μ©λ‰ (CPU, Memory) μμ§‘ κΈ°λ¥ ν™•μΈ
2.1 μ—°λ™ λ€μƒ μ›μ‹ λ°μ΄ν„°μ™€ μ—°λ™ ν›„ DBμ— μ €μ¥λ λ°μ΄ν„°κ°€ μΌμΉν•¨μ„ ν™•μΈ.
```
![nodefactor](https://user-images.githubusercontent.com/97263974/207226967-d13d0a51-782a-46dd-84a0-a9e93156ceb7.png)
![traffic](https://user-images.githubusercontent.com/97263974/207227147-f3d27fb2-1543-4b3b-ae1c-08bb96b4bf47.png)


## 3.1.1.4 KOREN IP SDN μ΄μ© λ°μ΄ν„° μμ§‘κΈ°λ¥ κ³ λ„ν™”(μ‹¤μ‹κ°„)
```
ANM-004
tb_syslog_collect
tb_sflow_collect    

βμμ§‘μ„λ²„μ λ΅κ·Έλ¥Ό ν†µν•΄μ„ syslog,sflow λ°μ΄ν„°κ°€ μ •μƒμ μΌλ΅ μμ§‘λκ³  μλ”μ§€λ¥Ό ν™•μΈ
 >> ipSdnSyslogLinkage
 >> ipSdnSflowLinkage 
β μ‹¤μ‹κ°„μΌλ΅ μμ§‘λ λ°μ΄ν„°κ°€ DBμ— μ €μ¥λλ”μ§€ ν™•μΈν•λ‹¤.
 >> gather.tb_syslog_collect
 >> gather.tb_sflow_collect
```


![syslogDB](https://user-images.githubusercontent.com/97263974/207231618-dda624b4-93c9-4290-8e59-b8bbc30d1968.png)
![sflowDB](https://user-images.githubusercontent.com/97263974/207231406-f2f8de64-1a20-42b8-a480-798c7687c46e.png)


## 3.2.1.1 μ¥μ•  μ‚¬μ „ μΈμ§€λ¥Ό μ„ν• IP SDN μ¤μ„μΉ μ¥λΉ„ μ¥μ•  κ°μ‹ κΈ°λ¥(AP)
```
ANM-005
β Syslog λ©”μ‹μ§€λ³„ κ²½λ³΄ μ½”λ“ λ§¤ν•‘ λ°μ΄ν„° κµ¬μ¶• λ‚΄μ© ν™•μΈ
- AI-NMS DBμ— μ ‘μ†ν•μ—¬ κ²½λ³΄ μ½”λ“ λ§¤ν•‘ λ°μ΄ν„°λ¥Ό μ΅°νν•λ‹¤.
>> gather.tb_syslog_rule_mst

β rca.tb_syslog_alarm_mst
- syslog κ²½λ³΄ μƒμ„± λ¨λ“ logλ¥Ό ν†µν•΄ κ²½λ³΄κ°€ μ •μƒ μ¶λ ¥λ¨μ„ ν™•μΈν•λ‹¤
/server/logs$ tail -f syslogPreprocessor.λ‚ μ§.log

```
![syslogRule](https://user-images.githubusercontent.com/97263974/207227557-8da990b4-cc69-4ee5-b530-9ff1235e360b.png)
![syslogAlarmLog](https://user-images.githubusercontent.com/97263974/207227482-c8e1e96f-cb72-4925-bb29-3c450753597d.png)
## 3.12.1.1 IP SDNκ³Όμ μ—°κ³„ μΈν„°νμ΄μ¤ μ•μ •μ„±
```
ANP-001
1. μμ§‘ μ£ΌκΈ°(1λ¶„) κ°„κ²©μΌλ΅ λ°μ΄ν„° μμ§‘ μ •μƒ μ—¬λ¶€ ν™•μΈ(4μΆ… μμ§‘: νΈλν”½, CPU, Memory)
1.1  λ°μ΄ν„° κ±΄μ: 1λ¶„ μ£ΌκΈ°λ΅ 3μΆ… λ°μ΄ν„°λ¥Ό μμ§‘ν•λ―€λ΅, 60λ¶„κ°„ 180κ±΄μ„ μμ§‘ν•¨.
1.2 1μ‹κ°„λ™μ• λ„λ½μ—†μ΄ λ°μ΄ν„°λ¥Ό μ •μƒμ μΌλ΅ μ—°κ³„ν• μ„±κ³µ κ±΄μ ν™•μΈ
1.3  μ„±λ¥ λ©ν‘: μ΄ μμ§‘ 180κ±΄ μ¤‘, 100%μΈ 180κ±΄μ„ μ •μƒμ μΌλ΅ μ—°κ³„ν•¨.

2. μ‹¤μ‹κ°„μ„± λ°μ΄ν„° μμ§‘ μ •μƒ μ—¬λ¶€ ν™•μΈ (Sflow)
2.1 μ‹¤μ‹κ°„μΌλ΅ μ—°λ™λ μμ§‘μ„λ²„μ λ΅κ·Έμ™€ DBμ— μ €μ¥λ λ°μ΄ν„° κ±΄μλ¥Ό ν™•μΈν•μ—¬ 100% λ°μ΄ν„° μμ§‘μ„ ν•κ³  μλ”μ§€ ν™•μΈν•¨.
```

## 3.12.1.3 μ™Έλ¶€ μ κ³µμ© λ¤ν”„ λ°μ΄ν„° μ •ν™•μ„±
```
ANP-003
β λ°μ΄ν„° μ¤λƒ…μƒ· μ΄λ ¥μ— λ€ν• λ¤ν”„ λ°μ΄ν„° μΌμΉμ—¬λ¶€ ν™•μΈ
β-1 κΈ° λ“±λ΅λ μ¤λƒ…μƒ· μ΄λ ¥μ—μ„ μ„μλ΅ 5κ°λ¥Ό μ„ μ •ν•μ—¬ λ°μ΄ν„°λ¥Ό λ¤ν”„ λ°›κ³ , ν•΄λ‹Ή λ¤ν”„ λ°μ΄ν„°κ°€ μ›λ³Έ λ°μ΄ν„°μ™€ μΌμΉν•¨μ„ ν™•μΈ

π‘“ λ¤ν”„ λ°μ΄ν„°?
π‘“ κΈ° λ“±λ΅λ μ¤λƒ…μƒ· μ΄λ ¥?
π‘“ μ–΄λ–»κ² λ³΄μ—¬μ£Όλ‚

```